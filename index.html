<!DOCTYPE html>
<html lang="en" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Radio Nagiz - راديو ناجز</title>
    <script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
    <style>
        @font-face {
            font-family: 'Ringbearer';
            src: url('Ringbearer.ttf') format('truetype');
            font-weight: normal;
            font-style: normal;
        }

        html, body {
            width: 130px; /* Set to radio container width */
            height: 310px; /* Set to radio container height */
            margin: 0;
            padding: 0;
            overflow: hidden; /* Hide any overflow */
        }

        body {
            background-color: #3d3732;
            font-family: 'Ringbearer', sans-serif;
            /* Removed display: flex, justify-content, align-items, min-height, padding */
            /* because the body now has fixed dimensions matching the container */
        }

        /* Main container */
        .radio-container {
            width: 130px;
            height: 310px;
            background: linear-gradient(145deg, #8c5a2b, #593a1a);
            border: 5px solid #4a2f1a;
            border-radius: 20px;
            padding: 15px;
            box-shadow: 10px 10px 20px rgba(0, 0, 0, 0.6), inset 0 0 15px rgba(0,0,0,0.4);
            display: flex;
            flex-direction: column;
            align-items: center;
            position: fixed; /* Changed to fixed to stick to the viewport */
            top: 0; /* Align to the top of the viewport */
            left: 0; /* Align to the left of the viewport */
            margin: 0; /* Remove any default margin */
            cursor: grab; /* Added for dragging */
        }

        /* Add a class for when the item is being dragged */
        .radio-container.dragging {
            cursor: grabbing;
            opacity: 0.8;
        }

        /* App Title */
        .app-title {
            color: #2a1a0d;
            font-family: 'Ringbearer', sans-serif;
            font-size: 1.2rem;
            margin-bottom: 15px;
            text-align: center;
            font-weight: bold;
            position: relative;
            margin-top: 25px;
        }

        /* Copyright text */
        .copyright {
            position: absolute;
            left: 20px;
            top: calc(50% + 15px);
            transform: translateY(-50%) rotate(180deg);
            writing-mode: vertical-rl;
            color: #2a1a0d;
            font-size: 0.96rem;
            font-weight: bold;
            letter-spacing: 1px;
            white-space: nowrap;
        }

        /* NSS - 2025 text - moved down 10px and increased by 60% */
        .year-text {
            position: absolute;
            right: 20px;
            top: calc(50% + 10px); /* Moved down 10px */
            transform: translateY(-50%) rotate(180deg);
            writing-mode: vertical-rl;
            color: #2a1a0d;
            font-size: 0.96rem; /* Increased by 60% from 0.6rem */
            font-weight: bold;
            letter-spacing: 1px;
        }

        /* Buttons container */
        .buttons-container {
            width: 100%;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 10px;
            margin-top: 25px;
        }

        /* Station buttons */
        .station-btn {
            border: 2px solid #4a2f1a;
            border-radius: 50%;
            width: 45px;
            height: 45px;
            font-size: 0;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.2s ease;
            box-shadow: 1px 1px 4px rgba(0,0,0,0.6);
            display: flex;
            justify-content: center;
            align-items: center;
            margin: 5px 0;
        }

        /* Stop button */
        #stop-btn {
            border: 2px solid #4a2f1a;
            border-radius: 50%;
            width: 45px;
            height: 45px;
            font-size: 0;
            cursor: pointer;
            transition: all 0.2s ease;
            box-shadow: 1px 1px 4px rgba(0,0,0,0.6);
            background-color: #8B4513;
            margin: 5px 0;
        }

        #stop-btn.playing {
            background-color: #FFA500;
        }

        /* Station buttons colors */
        #quran-btn {
            background-color: #1a3a8b;
        }

        #aljazeera-btn {
            background-color: #1e7a6d;
        }

        #quran-btn.active {
            background-color: #4169E1;
        }

        #aljazeera-btn.active {
            background-color: #40E0D0;
        }

        /* Volume control */
        .volume-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            width: 100%;
            margin-top: 15px;
        }

        .classic-slider {
            -webkit-appearance: none;
            appearance: none;
            width: 100px;
            height: 4px;
            background: #c8b496;
            border-radius: 2px;
            outline: none;
            margin: 5px 0;
        }

        .classic-slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 12px;
            height: 12px;
            background: #f0e6d2;
            border-radius: 50%;
            border: 1px solid #593a1a;
            cursor: pointer;
        }
    </style>
</head>
<body>
    <div class="radio-container">
        <div class="copyright">Nagiz Smart Solutions</div>
        
        <div class="year-text">NSS - 2025</div>
        
        <div class="app-title">Radio Nagiz</div>
        
        <div class="buttons-container">
            <button id="quran-btn" class="station-btn">القرآن الكريم</button>
            <button id="aljazeera-btn" class="station-btn">راديو الجزيرة</button>
            <button id="stop-btn">إيقاف</button>
        </div>
        
        <div class="volume-container">
            <input type="range" id="volume-slider" class="classic-slider" min="0" max="1" step="0.01" value="0.8">
        </div>
    </div>

    <audio id="audio-player" style="display:none;"></audio>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const audioPlayer = document.getElementById('audio-player');
            const aljazeeraBtn = document.getElementById('aljazeera-btn');
            const quranBtn = document.getElementById('quran-btn');
            const stopBtn = document.getElementById('stop-btn');
            const volumeSlider = document.getElementById('volume-slider');
            const radioContainer = document.querySelector('.radio-container'); // Get the radio container

            const stations = {
                aljazeera: { name: 'الجزيرة', url: 'https://live-hls-audio-web-aja.getaj.net/VOICE-AJA/index.m3u8', isHls: true },
                quran: { name: 'القرآن الكريم', url: 'https://stream.radiojar.com/8s5u5tpdtwzuv', isHls: false }
            };
            let hls = null, currentStation = null;

            function stopPlayback() {
                audioPlayer.pause();
                audioPlayer.src = '';
                if (hls) {
                    hls.destroy();
                    hls = null;
                }
                aljazeeraBtn.classList.remove('active');
                quranBtn.classList.remove('active');
                stopBtn.classList.remove('playing');
                currentStation = null;
            }

            function playStation(stationKey) {
                if (currentStation === stationKey) return;

                stopPlayback();

                currentStation = stationKey;
                const station = stations[stationKey];

                aljazeeraBtn.classList.toggle('active', stationKey === 'aljazeera');
                quranBtn.classList.toggle('active', stationKey === 'quran');
                stopBtn.classList.add('playing');

                if (station.isHls) {
                    if (Hls.isSupported()) {
                        hls = new Hls();
                        hls.loadSource(station.url);
                        hls.attachMedia(audioPlayer);
                        hls.on(Hls.Events.MANIFEST_PARSED, () => {
                            audioPlayer.play().catch(e => console.error("Play error:", e));
                        });
                        hls.on(Hls.Events.ERROR, (event, data) => {
                            if (data.fatal) {
                                console.error('HLS error:', data);
                                stopPlayback();
                            }
                        });
                    }
                } else {
                    audioPlayer.src = station.url;
                    audioPlayer.load();
                    audioPlayer.play().catch(e => console.error("Play error:", e));
                }
            }

            aljazeeraBtn.addEventListener('click', () => playStation('aljazeera'));
            quranBtn.addEventListener('click', () => playStation('quran'));
            stopBtn.addEventListener('click', stopPlayback);
            volumeSlider.addEventListener('input', (e) => audioPlayer.volume = e.target.value);

            audioPlayer.addEventListener('error', () => {
                if (currentStation) {
                    stopPlayback();
                }
            });

            audioPlayer.volume = volumeSlider.value;

            // --- Dragging functionality ---
            let isDragging = false;
            let offsetX, offsetY;

            radioContainer.addEventListener('mousedown', (e) => {
                isDragging = true;
                radioContainer.classList.add('dragging');

                // Calculate the offset from the mouse pointer to the element's top-left corner
                offsetX = e.clientX - radioContainer.getBoundingClientRect().left;
                offsetY = e.clientY - radioContainer.getBoundingClientRect().top;

                // Prevent default text selection or other default behaviors
                e.preventDefault();
            });

            document.addEventListener('mousemove', (e) => {
                if (!isDragging) return;

                // Calculate the new position based on mouse movement and initial offset
                const newX = e.clientX - offsetX;
                const newY = e.clientY - offsetY;

                radioContainer.style.left = `${newX}px`;
                radioContainer.style.top = `${newY}px`;
            });

            document.addEventListener('mouseup', () => {
                if (isDragging) {
                    isDragging = false;
                    radioContainer.classList.remove('dragging');
                }
            });
            // --- End Dragging functionality ---
        });
    </script>
</body>
</html>